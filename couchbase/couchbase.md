# Couchbase

1. Документированная БД
2. Выдерживает огромную нагрузку на чтение/запись (несколько миллионов)
3. Каждая нода отвечает за свой слой данных, например всего 8 нод, из них первые 3 содержат данные, 4 занимается индексами, 5 и 6 занимается запросами и 7, 8  - занимаются полноценным поиском.
4. Высокопроизводительный поиск по ключу и доступ к данным
5. В основе лежит распределенное хранилище ключей (KV). Хранилище KV представляет собой подход к управлению данными, который хранит уникальный идентификатор (ключ) вместе с частью произвольной информации.
6. Документы хранятся на сервере Couchbase в формате JSON. Формат поддерживает как базовые типы данных, такие как числа, строки и сложные типы, так и встроенные словари и массивы.

___
## Домашнее задание
> 1. Развернуть кластер Couchbase;
> 2. Создать БД, наполнить небольшими тестовыми данными;
> 3. Проверить отказоустойчивость;

### Развернуть кластер Couchbase.

Установку выполнил в docker. Создал файл docker-compose, с 3 подами
1. Запустил docker-compose up -d
2. Проверил, что все ок docker-compose ps
3. Переходим и настраиваем кластер http://localhost:8091/ui/index.html

___

### Создать БД, наполнить небольшими тестовыми данными.
```
1. CREATE COLLECTION mock;
2. INSERT INTO mock (KEY, VALUE) VALUES ("service1", {"uri":"localhost:8080","mockCount":3});
   INSERT INTO mock (KEY, VALUE) VALUES ("service2", {"uri":"localhost:8083","mockCount":10});
   INSERT INTO mock (KEY, VALUE) VALUES ("service5", {"uri":"localhost:8084","mockCount":3}); 
   INSERT INTO mock (KEY, VALUE) VALUES ("service3", {"uri":"localhost:8081","mockCount":130});
3. SELECT * FROM mock;
```
___

### Проверить отказоустойчивость
Дропнул 1 под с данными, сделал select, все работает так же.
Правда не получилось восстановить и сделать ребалансировку.
