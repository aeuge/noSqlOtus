# Clickhouse

1. Колоночная БД
2. Аналитическая - выдерживает огромную нагрузку на чтение/запись
3. Поддерживает множество движков
4. Отсутствует acid
5. Удалять и обновлять данные нет никакого смысла, база под эти требования не подходит

___

## Домашнее задание

> 1. Развернуть БД;
> 2. Выполнить импорт тестовой БД;
> 3. Выполнить несколько запросов и оценить скорость выполнения;

### Развернуть БД

Развернул базу в докере, настроил пользователя и сервер. Все файлы в папке docker.

### Выполнить импорт тестовой БД

Создал файл sample-data.sql. Запрос выполнялся очень долго, разорвал соединение и тестировал на данных, которые успели
вставиться (около 7 млн).

### Выполнить несколько запросов и оценить скорость выполнения

1. Запрос на подсчет всех данных выполнился за 122мс;

```
SELECT count()
FROM uk_price_paid;
```

2. Средння цена с построением графика - 244ms

```
SELECT toYear(date) AS year,
      round(avg(price)) AS price, bar(price, 0, 1000000, 80)
FROM uk_price_paid
GROUP BY year
ORDER BY year
```

3. Самые дорогие районы - 160ms

```
SELECT
    town,
    district,
    count() AS c,
    round(avg(price)) AS price,
    bar(price, 0, 5000000, 100)
FROM uk_price_paid
WHERE date >= '2020-01-01'
GROUP BY
    town,
    district
HAVING c >= 100
ORDER BY price DESC
LIMIT 100
```